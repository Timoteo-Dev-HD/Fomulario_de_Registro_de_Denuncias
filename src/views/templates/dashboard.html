{% extends "base.html" %}

{% block title %}
Dashboard
{% endblock title %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock styles %}

{% block content %}

<main>

    <div class="left">

        <div class="top">
            <div class="blocos">
                <i class="fa-solid fa-file-lines icon"></i>
                <h3>Total Den√∫ncias</h3>
                <p id="totalDenuncias">{{qtd_denuncias | default(0)}}</p>
            </div>

            <div class="blocos">
                <i class="fa-solid fa-spinner icon andamento"></i>
                <h3>Em An√°lise</h3>
                <p id="emAndamento">{{denuncias_em_analise | default(0)}}</p>
            </div>

            <div class="blocos">
                <i class="fa-solid fa-triangle-exclamation icon alerta"></i>
                <h3>Den√∫ncias do Dia</h3>
                <p id="foraSla">{{denuncias_do_dia | default(0)}}</p>
            </div>
        </div>


        <div class="medium">
            <canvas id="graficoMes"></canvas>
        </div>

        <div class="low">
            <div class="blocos2 graficoDoughnut">
                <canvas id="graficoDoughnut"></canvas>
            </div>
            <div class="blocos2 graficoStatus">
                <h3>Status das Den√∫ncias</h3>
                <canvas id="graficoStatus"></canvas>
            </div>
        </div>

    </div>

    <div class="right">
        <form class="center" action="{{ url_for('admin.filter_dashboard') }}" method="POST">

            <div class="blocos3 filtro-div">
                <h3>Filtros</h3>

                <div class="filtro-item">
                    <label for="periodo">Per√≠odo</label>
                    <input type="date" name="dataInicio" id="dataInicio">
                    <input type="date" name="dataFim" id="dataFim">
                </div>

                <div class="filtro-item">
                    <label for="status">Status</label>
                    <select name="status" id="status">
                        <option value="">Todos</option>
                        <option value="recebida">Recebida</option>
                        <option value="analise">Em an√°lise</option>
                        <option value="investigacao">Investiga√ß√£o</option>
                        <option value="encerrada">Encerrada</option>
                    </select>
                </div>

                <div class="filtro-item">
                    <label for="severidade">Severidade</label>
                    <select name="severidade" id="severidade">
                        <option value="">Todas</option>
                        <option value="baixa">Baixa</option>
                        <option value="media">M√©dia</option>
                        <option value="alta">Alta</option>
                        <option value="critica">Cr√≠tica</option>
                    </select>
                </div>

                <div class="filtro-item">
                    <label for="evidencias">Evid√™ncias</label>
                    <select name="evidencias" id="evidencias">
                        <option value="">Todos</option>
                        <option value="com">Com Evid√™ncias</option>
                        <option value="sem">Sem Evid√™ncias</option>
                    </select>
                </div>

                <button type="submit" class="btn-filtrar">Aplicar filtros</button>
            </div>


            <div class="blocos3 exporta-div">
                <h3>Exportar Relat√≥rio</h3>
                <button class="btn-exportar">
                    üìÑ Exportar PDF
                </button>
                <button class="btn-exportar">
                    üìä Exportar CSV
                </button>
                <button class="btn-exportar">
                    üìÅ Exportar Excel
                </button>
            </div>

        </form>
        
    </div>

</main>

{% endblock content %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
